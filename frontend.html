<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Password Strength Checker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <style>
    * {
      box-sizing: border-box;
      font-family: Arial, sans-serif;
    }

    body {
      margin: 0;
      height: 100vh;
      background: radial-gradient(circle at top, #020617, #000814); /* darker background */
      display: flex;
      justify-content: center;
      align-items: center;
      color: #e5f2ff;
    }

    .card {
      background: linear-gradient(145deg, #0a1a3a, #020617); /* deep navy card */
      padding: 30px 32px 32px;
      border-radius: 18px;
      width: 380px;
      box-shadow: 0 30px 60px rgba(0,0,0,0.7);
    }

    h2 {
      margin: 0 0 18px;
      text-align: center;
      font-weight: 600;
      letter-spacing: 0.6px;
      color: #82EEFD; /* arctic */
    }

    .input-wrap {
      position: relative;
    }

    input[type="password"], input[type="text"] {
      width: 100%;
      padding: 13px 42px 13px 14px;
      border-radius: 12px;
      border: none;
      outline: none;
      font-size: 15px;
      margin-bottom: 14px;
      background: #e6f6ff;
      color: #020617;
    }

    .toggle {
      position: absolute;
      right: 12px;
      top: 12px;
      cursor: pointer;
      font-size: 12px;
      color: #0a1a3a;
      user-select: none;
      opacity: 0.7;
    }

    .toggle:hover {
      opacity: 1;
    }

    button {
      width: 100%;
      padding: 12px;
      border-radius: 12px;
      border: none;
      background: linear-gradient(135deg, #63C5DA, #48AAAD); /* sky -> teal */
      color: #001219;
      font-weight: bold;
      letter-spacing: 0.3px;
      cursor: pointer;
      transition: transform 0.1s ease, box-shadow 0.15s ease;
    }

    button:hover {
      transform: translateY(-1px);
      box-shadow: 0 10px 22px rgba(99,197,218,0.45);
    }

    .meter-wrap {
      background: #1e2a5a; /* dark bar background */
      border-radius: 999px;
      overflow: hidden;
      margin-top: 12px;
      height: 10px;
    }

    .meter {
      height: 100%;
      width: 0%;
      background: #ef4444; /* default red */
      transition: width 0.35s ease, background 0.35s ease;
    }

    .result {
      margin-top: 16px;
      font-size: 14px;
      line-height: 1.65;
      color: #e5f2ff;
    }

    .label {
      font-weight: 600;
      color: #82EEFD;
    }

    .warning {
      color: #fbbf24;
      font-size: 13px;
      margin-top: 8px;
    }

    .muted {
      opacity: 0.8;
      font-size: 13px;
    }
  </style>
</head>
<body>

  <div class="card">
    <h2>Password Strength Checker</h2>

    <div class="input-wrap">
      <input 
        type="password" 
        id="password" 
        placeholder="Enter password"
        onkeydown="if(event.key === 'Enter') checkPassword()"
      />
      <span class="toggle" onclick="togglePassword()">Show</span>
    </div>

    <button onclick="checkPassword()">Check</button>

    <div class="meter-wrap">
      <div id="meter" class="meter"></div>
    </div>

    <div class="result" id="result">
      <div class="muted">Enter a password and press Check or Enter.</div>
    </div>
  </div>

  <script>
    function togglePassword() {
      const input = document.getElementById("password");
      const toggle = document.querySelector(".toggle");
      if (input.type === "password") {
        input.type = "text";
        toggle.textContent = "Hide";
      } else {
        input.type = "password";
        toggle.textContent = "Show";
      }
    }

    async function checkPassword() {
      const password = document.getElementById("password").value;
      const resultDiv = document.getElementById("result");
      const meter = document.getElementById("meter");

      if (!password) {
        resultDiv.innerHTML = "<span class='muted'>Please enter a password.</span>";
        meter.style.width = "0%";
        return;
      }

      resultDiv.innerHTML = "<span class='muted'>Checking password...</span>";

      try {
        const res = await fetch("http://127.0.0.1:8000/check-password", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ password })
        });

        const data = await res.json();

        const strength = data?.strength || "Not checked yet";
        const entropy = (data?.entropy !== undefined) ? data.entropy : "N/A";
        const notes = data?.reasons?.length ? data.reasons.join(", ") : "None";
        const policy = data?.policy_issues?.length
          ? data.policy_issues.join(", ")
          : "Meets all policy requirements";

        let percent, color;
        if (strength === "Strong") {
          percent = 100;
          color = "#22c55e";
        } else if (strength === "Medium") {
          percent = 60;
          color = "#f59e0b";
        } else {
          percent = 30;
          color = "#ef4444";
        }

        meter.style.width = percent + "%";
        meter.style.background = color;

        const breachWarning = notes.includes("breaches")
          ? "<div class='warning'>⚠️ This password appears in known data breaches. Do not reuse it.</div>"
          : "";

        resultDiv.innerHTML = `
          <div><span class="label">Strength:</span> <span style="color:${color}">${strength}</span></div>
          <div><span class="label">Entropy:</span> ${entropy} bits</div>
          <div><span class="label">Notes:</span> ${notes}</div>
          <div><span class="label">Policy:</span> ${policy}</div>
          ${breachWarning}
        `;
      } catch (err) {
        resultDiv.innerHTML = "<span class='muted'>Error connecting to API. Is the server running?</span>";
        meter.style.width = "0%";
      }
    }
  </script>

</body>
</html>



